Version 4
SHEET 1 2120 680
WIRE 1648 -288 1648 -304
WIRE 1648 -208 1648 -288
WIRE 1648 -80 1648 -128
WIRE 112 -32 48 -32
WIRE 288 -32 112 -32
WIRE 192 80 160 80
WIRE 288 80 288 -32
WIRE 288 80 256 80
WIRE 320 80 288 80
WIRE 448 80 384 80
WIRE 1968 112 1968 96
WIRE 48 128 48 -32
WIRE 448 144 448 80
WIRE 576 144 448 144
WIRE 720 144 576 144
WIRE 832 144 720 144
WIRE 1104 144 928 144
WIRE 1280 144 1104 144
WIRE 1472 144 1344 144
WIRE 1648 144 1536 144
WIRE 160 160 160 80
WIRE 160 160 128 160
WIRE 720 160 720 144
WIRE 576 176 576 144
WIRE 1104 208 1104 144
WIRE 1280 208 1280 144
WIRE 1344 208 1344 144
WIRE 1968 208 1968 112
WIRE 160 240 160 160
WIRE 192 240 160 240
WIRE 288 240 256 240
WIRE 320 240 288 240
WIRE 448 240 448 144
WIRE 448 240 384 240
WIRE 1648 240 1648 144
WIRE 912 272 912 192
WIRE 912 272 864 272
WIRE 128 320 128 160
WIRE 336 320 128 320
WIRE 576 320 576 240
WIRE 576 320 336 320
WIRE 720 320 720 240
WIRE 720 320 576 320
WIRE 864 320 864 272
WIRE 48 336 48 208
WIRE 144 336 48 336
WIRE 288 336 288 240
WIRE 288 336 144 336
WIRE 1968 352 1968 288
WIRE 144 368 144 336
WIRE 336 368 336 320
WIRE 864 432 864 400
WIRE 1104 432 1104 288
WIRE 1104 432 864 432
WIRE 1280 432 1280 288
WIRE 1280 432 1104 432
WIRE 1344 432 1344 288
WIRE 1488 432 1344 432
WIRE 1648 432 1648 304
WIRE 1648 432 1488 432
WIRE 864 448 864 432
WIRE 864 448 848 448
WIRE 848 464 848 448
WIRE 1488 480 1488 432
FLAG 336 368 0
FLAG 144 368 0
FLAG 848 464 0
FLAG 1488 480 0
FLAG 112 -32 Vin
FLAG 1648 144 Vout
FLAG 1968 352 0
FLAG 1968 112 Vref
FLAG 1648 -80 0
FLAG 1648 -288 vcond
SYMBOL voltage 48 112 R0
WINDOW 123 24 124 Left 2
WINDOW 39 24 124 Left 2
SYMATTR InstName V1
SYMATTR Value SINE(0 10 50)
SYMBOL diode 192 96 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL diode 320 96 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL diode 192 256 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL diode 320 256 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D4
SYMATTR Value 1N4148
SYMBOL cap 560 176 R0
SYMATTR InstName C1
SYMATTR Value 100µ
SYMBOL res 704 144 R0
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL nmos 832 192 R270
SYMATTR InstName M1
SYMATTR Value Si7336ADP
SYMBOL voltage 864 304 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 10 10m 0 0 {ton} {tp})
SYMBOL cap 1632 240 R0
SYMATTR InstName C2
SYMATTR Value 10µ
SYMBOL diode 1472 160 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D5
SYMATTR Value 1N4148
SYMBOL ind2 1264 192 R0
SYMATTR InstName L1
SYMATTR Value 4µ
SYMATTR Type ind
SYMBOL ind2 1360 304 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L2
SYMATTR Value 1µ
SYMATTR Type ind
SYMBOL res 1088 192 R0
SYMATTR InstName R2
SYMATTR Value 5k
SYMBOL voltage 1968 192 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 1.855432V
SYMBOL bv 1648 -224 R0
SYMATTR InstName B1
SYMATTR Value V=IF(V(vout)-V(vref)>0.5, 0.6, 70)
TEXT 1256 80 Left 2 !k L1 L2 1
TEXT -232 -208 Left 2 !.param freq 200
TEXT -232 -168 Left 2 !.param tp 1/freq
TEXT -272 -128 Left 2 !.param ton tp*0.01*{duty}
TEXT -160 112 Left 2 ;.ac dec 10 10 1000
TEXT -160 144 Left 2 !.tran 0 500m 0
TEXT -232 -248 Left 2 !.measure duty V(vcond)
TEXT -240 -80 Left 2 !.options numdgt=7
TEXT -280 -40 Left 2 !.options plotwinsize=0
TEXT -368 0 Left 2 !.MEAS pavg AVG V(N002)*I(L1)
TEXT -360 40 Left 2 !.MEAS pavg1 AVG V(vin)*I(V1)
